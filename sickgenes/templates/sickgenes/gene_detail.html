{% extends "sickgenes/base.html" %}

{% block title %}{{ gene.symbol }} | Sick Genes {% endblock %}

{% block content %}
<div>
    <div>
        <h1>{{ gene.symbol }}</h1>
        <p>{{ gene.name }}</p>
        <hr>
        <h3>Primary Identifiers</h3>
        <ul>
            <li><strong>HGNC ID:</strong> {{ gene.hgnc_id }}</li>
            <li><strong>Entrez ID:</strong> {{ gene.entrez_id }}</li>
            <li><strong>Ensembl ID:</strong> {{ gene.ensembl_gene_id }}</li>
            <li><strong>VEGA ID:</strong> {{ gene.vega_id }}</li>
            <li><strong>UCSC ID:</strong> {{ gene.ucsc_id }}</li>
        </ul>
    </div>
    
    <hr>
    
    <h3>Other Identifiers & Names</h3>
    
    <div>
        <strong>OMIM IDs:</strong>
        {% for item in gene.omimid_set.all %}{{ item.value }}{% if not forloop.last %}, {% endif %}{% empty %}None{% endfor %}
    </div>
    <div>
        <strong>UniProt IDs:</strong>
        {% for item in gene.uniprotid_set.all %}{{ item.value }}{% if not forloop.last %}, {% endif %}{% empty %}None{% endfor %}
    </div>
    <div>
        <strong>ENA IDs:</strong>
        {% for item in gene.ena_set.all %}{{ item.value }}{% if not forloop.last %}, {% endif %}{% empty %}None{% endfor %}
    </div>

    <h4>Aliases & Previous Symbols</h4>
    <ul>
        <li>
            <strong>Alias Symbols:</strong>
            {% for item in gene.aliassymbol_set.all %}{{ item.value }}{% if not forloop.last %}, {% endif %}{% empty %}None{% endfor %}
        </li>
        <li>
            <strong>Previous Symbols:</strong>
            {% for item in gene.prevsymbol_set.all %}{{ item.value }}{% if not forloop.last %}, {% endif %}{% empty %}None{% endfor %}
        </li>
        <li>
            <strong>Alias Names:</strong>
            {% for item in gene.aliasname_set.all %}"{{ item.value }}"{% if not forloop.last %}, {% endif %}{% empty %}None{% endfor %}
        </li>
        <li>
            <strong>Previous Names:</strong>
            {% for item in gene.prevname_set.all %}"{{ item.value }}"{% if not forloop.last %}, {% endif %}{% empty %}None{% endfor %}
        </li>
    </ul>

    <hr>

    <h2>Associated Studies</h2>

    {% if studies_data %}
        {% for study, cohorts in studies_data %}
            <div style="border: 1px solid #ccc; margin: 1em 0; padding: 1em;">
                <header>
                    <h4>
                        <a href="{{ study.get_absolute_url }}">{{ study.title }}</a>
                    </h4>
                    <p><small>{{ study.publication_year }} | {{ study.authors }}</small></p>
                </header>
                <div>
                    <h5>Associated cohorts</h5>
                    {% for cohort in cohorts %}
                        <div style="padding-left: 1em; margin-bottom: 0.5em;">
                            <strong>Disease:</strong>
                            {% for disease in cohort.disease_tags.all %}
                                <span>{{ disease.name }}</span>{% if not forloop.last %}, {% endif %}
                            {% empty %}
                                <span>No diseases specified</span>
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>
            No studies have been associated with this gene yet.
        </p>
    {% endif %}

</div>
{% endblock content %}